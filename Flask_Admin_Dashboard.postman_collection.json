{
	"info": {
		"_postman_id": "flask-admin-dashboard-001",
		"name": "Flask Admin Dashboard",
		"description": "Complete API collection for Flask Admin Dashboard with authentication, user management, application management, file category management, dashboard endpoints, and Firestore index management.",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
	},
	"item": [
		{
			"name": "Authentication",
			"item": [
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set(\"access_token\", response.access_token);",
									"    pm.collectionVariables.set(\"refresh_token\", response.refresh_token);",
									"    pm.collectionVariables.set(\"user_id\", response.user.id);",
									"    console.log(\"Login successful!\");",
									"    console.log(\"User ID:\", response.user.id);",
									"    console.log(\"User Role:\", response.user.role);",
									"} else {",
									"    console.log(\"Login failed:\", pm.response.json());",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"admin@example.com\",\n    \"password\": \"Admin123!\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/auth/login",
							"host": ["{{base_url}}"],
							"path": ["auth", "login"]
						},
						"description": "Login with email and password. Tokens are automatically saved to collection variables."
					},
					"response": []
				},
				{
					"name": "Refresh Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set(\"access_token\", response.access_token);",
									"    console.log(\"Token refreshed successfully!\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{refresh_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/refresh",
							"host": ["{{base_url}}"],
							"path": ["auth", "refresh"]
						},
						"description": "Refresh access token using refresh token."
					},
					"response": []
				},
				{
					"name": "Verify Token",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.valid) {",
									"        console.log(\"Token is valid!\");",
									"        console.log(\"User:\", response.user.email);",
									"        console.log(\"Role:\", response.token_info.role);",
									"        console.log(\"Expires at:\", response.token_info.expires_at);",
									"    } else {",
									"        console.log(\"Token is invalid:\", response.error.message);",
									"        console.log(\"Error code:\", response.error.code);",
									"    }",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"auth": {
							"type": "bearer",
							"bearer": [
								{
									"key": "token",
									"value": "{{access_token}}",
									"type": "string"
								}
							]
						},
						"method": "POST",
						"header": [],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"token\": \"{{access_token}}\"\n}",
							"options": {
								"raw": {
									"language": "json"
								}
							}
						},
						"url": {
							"raw": "{{base_url}}/auth/verify",
							"host": ["{{base_url}}"],
							"path": ["auth", "verify"]
						},
						"description": "Verify JWT token validity. Accepts token in Authorization header (Bearer token), request body (POST), or query parameter (GET). Returns token validity, user info, and token metadata including expiration time."
					},
					"response": []
				},
				{
					"name": "Get Current User",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/me",
							"host": ["{{base_url}}"],
							"path": ["auth", "me"]
						},
						"description": "Get current authenticated user information."
					},
					"response": []
				},
				{
					"name": "Logout",
					"request": {
						"method": "POST",
						"header": [],
						"url": {
							"raw": "{{base_url}}/auth/logout",
							"host": ["{{base_url}}"],
							"path": ["auth", "logout"]
						},
						"description": "Logout current user."
					},
					"response": []
				}
			],
			"description": "Authentication endpoints for login, logout, and token management."
		},
		{
			"name": "Users",
			"item": [
				{
					"name": "Get All Users",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users?page=1&per_page=10&role=admin&status=active",
							"host": ["{{base_url}}"],
							"path": ["users"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "role",
									"value": "admin",
									"disabled": true
								},
								{
									"key": "status",
									"value": "active",
									"disabled": true
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								},
								{
									"key": "sort",
									"value": "created_date",
									"disabled": true
								},
								{
									"key": "order",
									"value": "desc",
									"disabled": true
								},
								{
									"key": "category",
									"value": "",
									"disabled": true,
									"description": "Filter by file category IDs (comma-separated)"
								}
							]
						},
						"description": "Get all users with pagination and filtering. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Create User",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set(\"last_created_user_id\", response.user.id);",
									"    console.log(\"User created:\", response.user.email);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"newuser@example.com\",\n    \"password\": \"Password123!\",\n    \"role\": \"user\",\n    \"status\": \"active\",\n    \"first_name\": \"Jane\",\n    \"last_name\": \"Doe\",\n    \"application_ids\": [],\n    \"file_category_ids\": []\n}"
						},
						"url": {
							"raw": "{{base_url}}/users",
							"host": ["{{base_url}}"],
							"path": ["users"]
						},
						"description": "Create a new user. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["users", "{{user_id}}"]
						},
						"description": "Get a specific user by ID. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Update User",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"first_name\": \"Updated\",\n    \"last_name\": \"Name\",\n    \"role\": \"admin\",\n    \"status\": \"active\",\n    \"application_ids\": [],\n    \"file_category_ids\": []\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["users", "{{user_id}}"]
						},
						"description": "Update a user. All fields are optional. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Get All Roles",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/roles",
							"host": ["{{base_url}}"],
							"path": ["users", "roles"]
						},
						"description": "Get all available user roles. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Delete User",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/{{user_id}}",
							"host": ["{{base_url}}"],
							"path": ["users", "{{user_id}}"]
						},
						"description": "Delete a user. Cannot delete your own account. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Get File Categories (for Users)",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/users/file-categories",
							"host": ["{{base_url}}"],
							"path": ["users", "file-categories"]
						},
						"description": "Get all available active file categories for user assignment. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Initialize Superuser",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"email\": \"superadmin@example.com\",\n    \"password\": \"SuperAdmin123!\",\n    \"first_name\": \"Super\",\n    \"last_name\": \"Admin\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/users/init",
							"host": ["{{base_url}}"],
							"path": ["users", "init"]
						},
						"description": "Initialize superuser. Only works if no users exist in the database. No authentication required."
					},
					"response": []
				}
			],
			"description": "User management endpoints for CRUD operations."
		},
		{
			"name": "Applications",
			"item": [
				{
					"name": "Get All Applications",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/applications?page=1&per_page=10&status=active",
							"host": ["{{base_url}}"],
							"path": ["applications"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "10"
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								},
								{
									"key": "status",
									"value": "active",
									"disabled": true
								},
								{
									"key": "sort",
									"value": "name",
									"disabled": true
								},
								{
									"key": "order",
									"value": "asc",
									"disabled": true
								}
							]
						},
						"description": "Get all applications with pagination and filtering."
					},
					"response": []
				},
				{
					"name": "Create Application",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set(\"last_created_app_id\", response.application.id);",
									"    console.log(\"Application created:\", response.application.name);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"New Application\",\n    \"description\": \"Application description\",\n    \"url\": \"https://app.example.com\",\n    \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/applications",
							"host": ["{{base_url}}"],
							"path": ["applications"]
						},
						"description": "Create a new application. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Get Application by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/applications/1",
							"host": ["{{base_url}}"],
							"path": ["applications", "1"]
						},
						"description": "Get a specific application by ID."
					},
					"response": []
				},
				{
					"name": "Update Application",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Application\",\n    \"description\": \"Updated description\",\n    \"url\": \"https://updated.example.com\",\n    \"status\": \"maintenance\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/applications/1",
							"host": ["{{base_url}}"],
							"path": ["applications", "1"]
						},
						"description": "Update an application. All fields are optional. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Delete Application",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/applications/1",
							"host": ["{{base_url}}"],
							"path": ["applications", "1"]
						},
						"description": "Delete an application. Requires admin/superadmin role."
					},
					"response": []
				}
			],
			"description": "Application management endpoints for CRUD operations."
		},
		{
			"name": "File Categories",
			"item": [
				{
					"name": "Get All File Categories",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/file-categories?page=1&per_page=20&status=active",
							"host": ["{{base_url}}"],
							"path": ["file-categories"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "per_page",
									"value": "20"
								},
								{
									"key": "search",
									"value": "",
									"disabled": true
								},
								{
									"key": "status",
									"value": "active",
									"disabled": true
								},
								{
									"key": "sort",
									"value": "code",
									"disabled": true
								},
								{
									"key": "order",
									"value": "asc",
									"disabled": true
								}
							]
						},
						"description": "Get all file categories with pagination and filtering."
					},
					"response": []
				},
				{
					"name": "Create File Category",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 201) {",
									"    const response = pm.response.json();",
									"    pm.collectionVariables.set(\"last_created_category_id\", response.file_category.id);",
									"    console.log(\"File category created:\", response.file_category.code);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"code\": \"1099\",\n    \"name\": \"1099 Forms\",\n    \"description\": \"Tax form category\",\n    \"status\": \"active\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/file-categories",
							"host": ["{{base_url}}"],
							"path": ["file-categories"]
						},
						"description": "Create a new file category. Code will be normalized to uppercase. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Get File Category by ID",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/file-categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["file-categories", "{{category_id}}"]
						},
						"description": "Get a specific file category by ID."
					},
					"response": []
				},
				{
					"name": "Update File Category",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n    \"name\": \"Updated Category Name\",\n    \"description\": \"Updated description\",\n    \"status\": \"inactive\"\n}"
						},
						"url": {
							"raw": "{{base_url}}/file-categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["file-categories", "{{category_id}}"]
						},
						"description": "Update a file category. All fields are optional. Code will be normalized to uppercase if provided. Requires admin/superadmin role."
					},
					"response": []
				},
				{
					"name": "Delete File Category",
					"request": {
						"method": "DELETE",
						"header": [],
						"url": {
							"raw": "{{base_url}}/file-categories/{{category_id}}",
							"host": ["{{base_url}}"],
							"path": ["file-categories", "{{category_id}}"]
						},
						"description": "Delete a file category. Cannot delete if assigned to any users. Requires admin/superadmin role."
					},
					"response": []
				}
			],
			"description": "File category management endpoints for CRUD operations."
		},
		{
			"name": "Dashboard",
			"item": [
				{
					"name": "Get Dashboard Stats",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const stats = pm.response.json();",
									"    console.log(\"Total users:\", stats.users.total);",
									"    console.log(\"Active users:\", stats.users.active);",
									"    console.log(\"Total applications:\", stats.applications.total);",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dashboard/stats",
							"host": ["{{base_url}}"],
							"path": ["dashboard", "stats"]
						},
						"description": "Get dashboard statistics including user counts, application counts, and activity metrics."
					},
					"response": []
				},
				{
					"name": "Get System Health",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const health = pm.response.json();",
									"    console.log(\"CPU Usage:\", health.cpu.usage_percent + \"%\");",
									"    console.log(\"Memory Usage:\", health.memory.usage_percent + \"%\");",
									"    console.log(\"Disk Usage:\", health.disk.usage_percent + \"%\");",
									"}"
								],
								"type": "text/javascript"
							}
						}
					],
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dashboard/health",
							"host": ["{{base_url}}"],
							"path": ["dashboard", "health"]
						},
						"description": "Get real-time system health metrics (CPU, memory, disk usage)."
					},
					"response": []
				},
				{
					"name": "Get Recent Activity",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dashboard/activity",
							"host": ["{{base_url}}"],
							"path": ["dashboard", "activity"]
						},
						"description": "Get recent activity logs (last 50 activities)."
					},
					"response": []
				},
				{
					"name": "Get Metrics History",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/dashboard/metrics/history",
							"host": ["{{base_url}}"],
							"path": ["dashboard", "metrics", "history"]
						},
						"description": "Get historical system metrics (last 24 hours)."
					},
					"response": []
				}
			],
			"description": "Dashboard endpoints for statistics, health monitoring, and activity logs."
		},
		{
			"name": "Firestore Indexes",
			"item": [
				{
					"name": "Get Indexes Config",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/firestore/indexes",
							"host": ["{{base_url}}"],
							"path": ["firestore", "indexes"]
						},
						"description": "Get the current indexes configuration from firestore.indexes.json. Requires superadmin role."
					},
					"response": []
				},
				{
					"name": "Create Indexes",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"url": {
							"raw": "{{base_url}}/firestore/indexes/create",
							"host": ["{{base_url}}"],
							"path": ["firestore", "indexes", "create"]
						},
						"description": "Create Firestore composite indexes programmatically using the Admin API. Reads from firestore.indexes.json. Requires superadmin role."
					},
					"response": []
				},
				{
					"name": "Validate Indexes",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/firestore/indexes/validate",
							"host": ["{{base_url}}"],
							"path": ["firestore", "indexes", "validate"]
						},
						"description": "Validate the indexes configuration file. Requires superadmin role."
					},
					"response": []
				},
				{
					"name": "Get Indexes Info",
					"request": {
						"method": "GET",
						"header": [],
						"url": {
							"raw": "{{base_url}}/firestore/indexes/info",
							"host": ["{{base_url}}"],
							"path": ["firestore", "indexes", "info"]
						},
						"description": "Get information about the Firestore project and database. Requires superadmin role."
					},
					"response": []
				}
			],
			"description": "Firestore index management endpoints. Requires superadmin role."
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global pre-request script",
					"// Can be used for token refresh logic if needed"
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					"// Global test script for error handling",
					"if (pm.response.code >= 400) {",
					"    const error = pm.response.json();",
					"    console.error(\"Error:\", error.error.code, \"-\", error.error.message);",
					"    ",
					"    // Handle token expiration",
					"    if (pm.response.code === 401 && error.error.code === \"UNAUTHORIZED\") {",
					"        console.log(\"Token may have expired. Please refresh or login again.\");",
					"    }",
					"}"
				]
			}
		}
	],
	"variable": [
		{
			"key": "base_url",
			"value": "http://localhost:5000/api",
			"type": "string"
		},
		{
			"key": "access_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "refresh_token",
			"value": "",
			"type": "string"
		},
		{
			"key": "user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "last_created_user_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "last_created_app_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "category_id",
			"value": "",
			"type": "string"
		},
		{
			"key": "last_created_category_id",
			"value": "",
			"type": "string"
		}
	],
	"auth": {
		"type": "bearer",
		"bearer": [
			{
				"key": "token",
				"value": "{{access_token}}",
				"type": "string"
			}
		]
	}
}
